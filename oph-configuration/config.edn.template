; Configuration template for remote deployments
{:config
 {:app {:middleware {:arguments {:session {:key "{{oti_session_cookie_key}}"
                                           :cookie-attrs {:max-age 28800
                                                          :http-only true
                                                          :secure true
                                                          :domain "{{oti_cookie_domain}}"
                                                          :path "/oti"}}
                                 :ring-logger {:env "{{oti_env}}"}}}}
  :db {:uri "{{oti_db_uri}}"
       :username "{{oti_db_username}}"
       :password "{{oti_db_password}}"
       :pool-name "oti-pool"
       :maximum-pool-size {{oti_db_max_pool_size}}}
  :ldap {:server "{{host_ldap}}"
         :port 389
         :userdn "{{ldap_manager_userdn}}"
         :password "{{ldap_manager_password}}"
         :ssl false}
  :cas {:user {:username "{{oti_cas_username}}"
               :password "{{oti_cas_password}}"}}
  :localisation {:default-parameters {:category "{{oti_localisation_default_category}}"}}
  :vetuma-payment {:vetuma-host "{{oti_vetuma_host}}"
                   :app-id "{{oti_vetuma_app_id}}"
                   :oti-vetuma-uri "{{oti_vetuma_oti_vetuma_uri}}"
                   :secret "{{oti_vetuma_shared_secret}}"
                   :ap "{{oti_vetuma_shared_ap}}"
                   :rcvid "{{oti_vetuma_shared_rcvid}}"}
  :paytrail-payment {:paytrail-host "{{oti_paytrail_host}}"
                     :oti-paytrail-uri "{{oti_paytrail_oti_paytrail_uri}}"
                     :merchant-id {{oti_paytrail_merchant_id}}
                     :merchant-secret "{{oti_paytrail_merchant_secret}}"}
  :url-helper {:virkailija-host "{{host_virkailija}}"
               :tunnistus-host "{{host_tunnistus}}"
               :oti-host "{{oti_host}}"}
  :global-config {:env "{{oti_env}}"}
  :payments   {:amounts {:full  {{oti_payment_amount_full}}
                         :retry {{oti_payment_amount_retry}}}}}}
